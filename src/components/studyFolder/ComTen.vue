<template>
  <div class="margin">
    <h1>10. store í™œìš©</h1>

    <div class="margin">
      <h2>âš¾ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (state)</h2>
      <p>ğŸ€ /store/modules/Practice.jsë¥¼ import í•´ì¤€ ë’¤,<br>
        store.modulesì— ë“±ë¡í•œ Practiceì˜ state.info ê°’ ê°€ì ¸ì˜¤ê¸°</p>
      <p class="stateStyle">ğŸˆ state.info<br/><br/>{{ infoData }}</p>
    </div>

    <div class="margin">
      <h2>âš¾ state ê°’ ë°”ê¾¸ê¸° (mutations, actions)</h2>
      <p>ğŸ€ ìœ„ì™€ ë§ˆì°¬ê°€ì§€ë¡œ import í›„ ë©”ì†Œë“œì— í•„ìš” ê°’ì„ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê²¨ì£¼ë©° ì‹¤í–‰<br/>
        actionsìœ¼ë¡œ ë°ì´í„°ë¥¼ ë„˜ê²¨ì£¼ê³  actionsì—ì„œ mutationsë¥¼ í˜¸ì¶œí•˜ì—¬ í•¸ë“¤ë§
      </p>
      <input class="nameInput" v-model="newInfo.name" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"/>
      <select v-model="newInfo.age">
        <option v-for="option in ageOptions" :value="option.value">
          {{ option.text }}
        </option>
      </select>
      <p><button class="check" @click="runActions">actions run</button></p>
      <p>ğŸ”¼ actionsë¡œ mutations ì‹¤í–‰ í›„ ìœ„ì˜ state.info ë°ì´í„° í™•ì¸</p>
    </div>

    <div class="margin">
      <h2>âš¾ Default state ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (getters)</h2>
      <p>ğŸ€ stateê°€ ë³€ê²½ë˜ì—ˆë”ë¼ë„ ê¸°ì¡´ì˜ ê°’ì„ ê°€ì ¸ì˜¤ê¸°</p>
      <p><button class="check" @click="runGetters">getters run</button></p>
      <p>ğŸ”¼ mutations ì‹¤í–‰ í›„ ìœ„ì˜ state.info ë°ì´í„° í™•ì¸</p>
    </div>


  </div>
  <a @click="scrollToTop()" class="top">ğŸ”</a>
</template>

<script>
//import { store } from "@/store/modules/Practice";
/*import { useStore } from "vuex";*/
import { store } from "@/store/store";
import { actions, mutations } from "@/store/modules/Practice";

export default {
  name: "ComTen",

  data() {
    return {
      // state // store.state.Practice.info
      infoData: store.state.Practice.info,
      //mutations
      newInfo: {
        name: "",
        age: 31
      },
      ageOptions: [
        { text: '31', value: 31 },
        { text: '30', value: 30 },
        { text: '29', value: 29 },
        { text: '28', value: 28 }
      ],
    }
  },

  /*created() {
    const store = useStore();
    this.infoData = store.state.Practice.info;
  },*/

  methods: {
    runActions() {
      /*const store = useStore();
      this.infoData = store.state.Practice.info;*/
      if(this.newInfo.name.length < 2) {
        alert("ì´ë¦„ì„ ë‘ ê¸€ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”")
      } else {
        /*mutations.setInfo(state, this.newInfo);*/
        /*actions.settingInfo('setInfo', this.infoData);*/
        /*store.actions.settingInfo('setInfo', this.infoData)*/
        /*this.$store.dispatch('Practice/settingInfo', this.infoData);*/
        /*store.dispatch("settingInfo", this.infoData)*/

        this.$store.dispatch('Practice/settingInfo', this.infoData)
        this.infoData = state.info;
      }
    },
    runGetters() {
      this.infoData = getters.getDefaultInfo(state);
    },

    scrollToTop() {
      window.scrollTo(0, 0);
    }
  }
}
</script>

<style> @import "../../views/studyFolder/css/css.css"; </style>
<style scoped>
  .stateStyle {
    border: 8px dotted orange;
    padding: 20px;
  }
  .nameInput {
    margin-right: 10px;
  }
</style>